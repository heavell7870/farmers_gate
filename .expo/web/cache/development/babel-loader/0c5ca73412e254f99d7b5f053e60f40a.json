{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport Container from \"../../components/Container\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { color } from \"../../utils/color\";\nimport Button from \"../../components/Button\";\nimport { GlobalStyles } from \"../../utils/globalStyles\";\nimport FloatingLabel from \"../../components/FloatingLabel\";\nimport Feather from \"@expo/vector-icons/Feather\";\nimport common_axios from \"../../utils/axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { setIsUser, setUserData } from \"../../redux/actions/main\";\nimport { useDispatch } from 'react-redux';\n\nfunction Verification(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var email = route.params.email;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      otp = _useState2[0],\n      setOtp = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  var verify = function verify() {\n    var _await$common_axios$p, data, _data$user;\n\n    return _regeneratorRuntime.async(function verify$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(common_axios.post('/auth/verify_otp', {\n              email: email,\n              otp: otp\n            }));\n\n          case 3:\n            _await$common_axios$p = _context.sent;\n            data = _await$common_axios$p.data;\n            console.log(data);\n\n            if (!(data.status == 200)) {\n              _context.next = 13;\n              break;\n            }\n\n            dispatch(setUserData(data.user));\n            dispatch(setIsUser(true));\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('access_token', JSON.stringify((_data$user = data.user) == null ? void 0 : _data$user.api_token)));\n\n          case 11:\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user_data', JSON.stringify(data.user)));\n\n          case 13:\n            _context.next = 18;\n            break;\n\n          case 15:\n            _context.prev = 15;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 15]], Promise);\n  };\n\n  return React.createElement(Container, null, React.createElement(Feather, {\n    onPress: function onPress() {\n      return navigation.goBack(null);\n    },\n    style: {\n      position: \"absolute\",\n      top: 45,\n      left: 20\n    },\n    name: \"arrow-left\",\n    size: 24,\n    color: color.white\n  }), React.createElement(View, {\n    style: {\n      width: \"100%\",\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginTop: 100\n    }\n  }, React.createElement(Text, {\n    style: _objectSpread({\n      fontSize: 28,\n      color: color.white\n    }, GlobalStyles.bold_text)\n  }, \"Verification!\"), React.createElement(Text, {\n    style: _objectSpread({\n      fontSize: 16,\n      textAlign: \"center\",\n      color: color.white,\n      marginTop: 10\n    }, GlobalStyles.semi_bold_text)\n  }, \"Enter 4 digits code that sent to your email address.\"), React.createElement(FloatingLabel, {\n    value: otp,\n    style: {\n      backgroundColor: color.transparent,\n      marginTop: 60\n    },\n    label: \"Enter OTP\",\n    autoCapitalize: \"none\",\n    keyboard: \"phone-pad\",\n    maxLength: 4,\n    onChangeText: function onChangeText(value) {\n      setOtp(value);\n    }\n  }), React.createElement(Button, {\n    titleStyle: {\n      fontSize: 16\n    },\n    style: {\n      marginTop: 15\n    },\n    title: \"Verify\",\n    onPress: function onPress() {\n      return verify();\n    }\n  }), React.createElement(Text, {\n    style: _objectSpread({\n      fontSize: 14,\n      color: color.light_grey,\n      marginTop: 10\n    }, GlobalStyles.regular_text)\n  }, \"Didn\\u2019t recieve code?? \", React.createElement(Text, {\n    style: {\n      color: color.white\n    }\n  }, \"Resend OTP\"))));\n}\n\nexport default Verification;","map":{"version":3,"sources":["/Users/omkumar/Desktop/projects/farmers-gate/farmers-gate/src/screens/verification/index.js"],"names":["React","useState","Container","color","Button","GlobalStyles","FloatingLabel","Feather","common_axios","AsyncStorage","setIsUser","setUserData","useDispatch","Verification","navigation","route","email","params","otp","setOtp","dispatch","verify","post","data","console","log","status","user","setItem","JSON","stringify","api_token","goBack","position","top","left","white","width","justifyContent","alignItems","marginTop","fontSize","bold_text","textAlign","semi_bold_text","backgroundColor","transparent","value","light_grey","regular_text"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP;;;AAEA,SAASC,KAAT;AACA,OAAOC,MAAP;AACA,SAASC,YAAT;AACA,OAAOC,aAAP;AACA,OAAOC,OAAP,MAAoB,4BAApB;AACA,OAAOC,YAAP;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,SAASC,SAAT,EAAoBC,WAApB;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,SAASC,YAAT,OAA6C;AAAA,MAArBC,UAAqB,QAArBA,UAAqB;AAAA,MAATC,KAAS,QAATA,KAAS;AAEzC,MAAQC,KAAR,GAAkBD,KAAK,CAACE,MAAxB,CAAQD,KAAR;;AACA,kBAAsBf,QAAQ,CAAC,EAAD,CAA9B;AAAA;AAAA,MAAOiB,GAAP;AAAA,MAAYC,MAAZ;;AACA,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;;AAEA,MAAMS,MAAM,GAAG,SAATA,MAAS;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEgBb,YAAY,CAACc,IAAb,CAAkB,kBAAlB,EAAsC;AACzDN,cAAAA,KAAK,EAALA,KADyD;AAEzDE,cAAAA,GAAG,EAAHA;AAFyD,aAAtC,CAFhB;;AAAA;AAAA;AAECK,YAAAA,IAFD,yBAECA,IAFD;AAMPC,YAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AANO,kBAOHA,IAAI,CAACG,MAAL,IAAe,GAPZ;AAAA;AAAA;AAAA;;AAQHN,YAAAA,QAAQ,CAACT,WAAW,CAACY,IAAI,CAACI,IAAN,CAAZ,CAAR;AACAP,YAAAA,QAAQ,CAACV,SAAS,CAAC,IAAD,CAAV,CAAR;AATG;AAAA,6CAUGD,YAAY,CAACmB,OAAb,CAAqB,cAArB,EAAqCC,IAAI,CAACC,SAAL,eAAeP,IAAI,CAACI,IAApB,qBAAe,WAAWI,SAA1B,CAArC,CAVH;;AAAA;AAAA;AAAA,6CAWGtB,YAAY,CAACmB,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeP,IAAI,CAACI,IAApB,CAAlC,CAXH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcPH,YAAAA,OAAO,CAACC,GAAR;;AAdO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAf;;AAkBA,SACI,oBAAC,SAAD,QACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE;AAAA,aAAMX,UAAU,CAACkB,MAAX,CAAkB,IAAlB,CAAN;AAAA,KAAlB;AAAiD,IAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAE,UAAZ;AAAwBC,MAAAA,GAAG,EAAE,EAA7B;AAAiCC,MAAAA,IAAI,EAAE;AAAvC,KAAxD;AAAqG,IAAA,IAAI,EAAC,YAA1G;AAAuH,IAAA,IAAI,EAAE,EAA7H;AAAiI,IAAA,KAAK,EAAEhC,KAAK,CAACiC;AAA9I,IADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,cAAc,EAAE,QAAjC;AAA2CC,MAAAA,UAAU,EAAE,QAAvD;AAAiEC,MAAAA,SAAS,EAAE;AAA5E;AAAb,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK;AAAIC,MAAAA,QAAQ,EAAE,EAAd;AAAkBtC,MAAAA,KAAK,EAAEA,KAAK,CAACiC;AAA/B,OAAyC/B,YAAY,CAACqC,SAAtD;AAAX,qBADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK;AAAID,MAAAA,QAAQ,EAAE,EAAd;AAAkBE,MAAAA,SAAS,EAAE,QAA7B;AAAuCxC,MAAAA,KAAK,EAAEA,KAAK,CAACiC,KAApD;AAA2DI,MAAAA,SAAS,EAAE;AAAtE,OAA6EnC,YAAY,CAACuC,cAA1F;AAAX,4DAFJ,EAGI,oBAAC,aAAD;AACI,IAAA,KAAK,EAAE1B,GADX;AAEI,IAAA,KAAK,EAAE;AAAE2B,MAAAA,eAAe,EAAE1C,KAAK,CAAC2C,WAAzB;AAAsCN,MAAAA,SAAS,EAAE;AAAjD,KAFX;AAGI,IAAA,KAAK,EAAE,WAHX;AAII,IAAA,cAAc,EAAC,MAJnB;AAKI,IAAA,QAAQ,EAAE,WALd;AAMI,IAAA,SAAS,EAAE,CANf;AAOI,IAAA,YAAY,EAAE,sBAACO,KAAD,EAAW;AACrB5B,MAAAA,MAAM,CAAC4B,KAAD,CAAN;AACH;AATL,IAHJ,EAcI,oBAAC,MAAD;AAAQ,IAAA,UAAU,EAAE;AAAEN,MAAAA,QAAQ,EAAE;AAAZ,KAApB;AAAsC,IAAA,KAAK,EAAE;AAAED,MAAAA,SAAS,EAAE;AAAb,KAA7C;AAAgE,IAAA,KAAK,EAAE,QAAvE;AAAiF,IAAA,OAAO,EAAE;AAAA,aAAMnB,MAAM,EAAZ;AAAA;AAA1F,IAdJ,EAeI,oBAAC,IAAD;AAAM,IAAA,KAAK;AAAIoB,MAAAA,QAAQ,EAAE,EAAd;AAAkBtC,MAAAA,KAAK,EAAEA,KAAK,CAAC6C,UAA/B;AAA2CR,MAAAA,SAAS,EAAE;AAAtD,OAA6DnC,YAAY,CAAC4C,YAA1E;AAAX,oCAA2H,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAE9C,MAAAA,KAAK,EAAEA,KAAK,CAACiC;AAAf;AAAb,kBAA3H,CAfJ,CAFJ,CADJ;AAsBH;;AAED,eAAevB,YAAf","sourcesContent":["import React, { useState } from 'react';\nimport Container from '../../components/Container';\nimport { View, Text } from 'react-native'\nimport { color } from '../../utils/color';\nimport Button from '../../components/Button';\nimport { GlobalStyles } from '../../utils/globalStyles';\nimport FloatingLabel from '../../components/FloatingLabel';\nimport Feather from \"@expo/vector-icons/Feather\";\nimport common_axios from '../../utils/axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { setIsUser, setUserData } from '../../redux/actions/main';\nimport { useDispatch } from 'react-redux';\n\nfunction Verification({ navigation, route }) {\n\n    const { email } = route.params;\n    const [otp, setOtp] = useState(\"\")\n    const dispatch = useDispatch()\n\n    const verify = async () => {\n        try {\n            const { data } = await common_axios.post('/auth/verify_otp', {\n                email,\n                otp\n            });\n            console.log(data)\n            if (data.status == 200) {\n                dispatch(setUserData(data.user))\n                dispatch(setIsUser(true))\n                await AsyncStorage.setItem('access_token', JSON.stringify(data.user?.api_token))\n                await AsyncStorage.setItem('user_data', JSON.stringify(data.user))\n            }\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    return (\n        <Container>\n            <Feather onPress={() => navigation.goBack(null)} style={{ position: \"absolute\", top: 45, left: 20 }} name=\"arrow-left\" size={24} color={color.white} />\n            <View style={{ width: \"100%\", justifyContent: 'center', alignItems: 'center', marginTop: 100 }}>\n                <Text style={{ fontSize: 28, color: color.white, ...GlobalStyles.bold_text }}>Verification!</Text>\n                <Text style={{ fontSize: 16, textAlign: \"center\", color: color.white, marginTop: 10, ...GlobalStyles.semi_bold_text }}>Enter 4 digits code that sent to your email address.</Text>\n                <FloatingLabel\n                    value={otp}\n                    style={{ backgroundColor: color.transparent, marginTop: 60 }}\n                    label={\"Enter OTP\"}\n                    autoCapitalize=\"none\"\n                    keyboard={\"phone-pad\"}\n                    maxLength={4}\n                    onChangeText={(value) => {\n                        setOtp(value);\n                    }}\n                />\n                <Button titleStyle={{ fontSize: 16 }} style={{ marginTop: 15 }} title={\"Verify\"} onPress={() => verify()} />\n                <Text style={{ fontSize: 14, color: color.light_grey, marginTop: 10, ...GlobalStyles.regular_text }}>Didnâ€™t recieve code?? <Text style={{ color: color.white }}>Resend OTP</Text></Text>\n            </View>\n        </Container>\n    )\n}\n\nexport default Verification;"]},"metadata":{},"sourceType":"module"}