{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { color } from \"../../utils/color\";\nimport Header from \"../../components/Header\";\nimport { GlobalStyles } from \"../../utils/globalStyles\";\nimport { useSelector } from \"react-redux\";\nimport Button from \"../../components/Button\";\nimport AntDesign from \"@expo/vector-icons/AntDesign\";\nimport FloatingLabel from \"../../components/FloatingLabel\";\nimport * as ImagePicker from 'expo-image-picker';\nimport common_axios from \"../../utils/axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { BACKEND_URL } from \"../../utils/url\";\nexport default function EditProfile() {\n  var _useSelector = useSelector(function (state) {\n    return state.reducer;\n  }),\n      user_data = _useSelector.user_data;\n\n  console.log(user_data);\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      phone = _useState4[0],\n      setPhone = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      image = _useState8[0],\n      setImage = _useState8[1];\n\n  useEffect(function () {\n    setEmail(user_data.email);\n    setPhone(user_data.phone);\n    setName(user_data.name);\n    setImage(user_data.profile_pic);\n  }, []);\n\n  var pick_image = function pick_image() {\n    var result;\n    return _regeneratorRuntime.async(function pick_image$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Photos,\n              allowsEditing: true,\n              aspect: [4, 4],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var update = function update() {\n    var form_data, token;\n    return _regeneratorRuntime.async(function update$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            form_data = new FormData();\n\n            if ((email == null ? void 0 : email.length) != 0 && user_data.email != email) {\n              form_data.append(\"email\", email);\n            }\n\n            if ((name == null ? void 0 : name.length) != 0 && user_data.name != name) {\n              form_data.append(\"name\", name);\n            }\n\n            if ((phone == null ? void 0 : phone.length) != 0 && user_data.phone != phone) {\n              form_data.append(\"phone\", phone);\n            }\n\n            if ((image == null ? void 0 : image.length) != 0 && user_data.profile_pic != image) {\n              form_data.append(\"profile_pic\", {\n                type: \"image/png\",\n                name: user_data.name + \".png\",\n                uri: image\n              });\n            }\n\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('access_token'));\n\n          case 7:\n            token = _context2.sent;\n            fetch(BACKEND_URL + \"/auth/update_profile\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"multipart/form-data\",\n                Accept: \"application/json\",\n                Authorization: \"Bearer \" + token\n              },\n              body: form_data\n            }).then(function (res) {\n              return res.json();\n            }).then(function (json) {\n              console.log(json);\n            }).catch(function (e) {\n              console.log(e);\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: {\n      backgroundColor: color.light_primary\n    }\n  }, React.createElement(View, {\n    style: {\n      height: '100%',\n      width: \"100%\",\n      alignItems: 'center',\n      backgroundColor: color.white\n    }\n  }, React.createElement(Header, {\n    type: \"custom\",\n    rightBtnVisible: false,\n    right_text: \"Edit\",\n    onRightBtnPress: function onRightBtnPress() {\n      return console.log(\"Hii\");\n    },\n    title: \"Edit Profile\"\n  }), React.createElement(View, {\n    style: {\n      height: 70,\n      width: 70,\n      borderRadius: 35,\n      marginTop: 60\n    }\n  }, React.createElement(Image, {\n    source: {\n      uri: image ? image : 'https://picsum.photos/200'\n    },\n    style: {\n      height: 70,\n      width: 70,\n      borderRadius: 35\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: pick_image,\n    style: {\n      backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n      width: '100%',\n      height: '100%',\n      justifyContent: 'center',\n      alignItems: 'center',\n      borderRadius: 100,\n      position: 'absolute'\n    }\n  }, React.createElement(AntDesign, {\n    color: color.white,\n    size: 20,\n    name: \"camerao\"\n  }))), React.createElement(View, {\n    style: {\n      width: \"90%\",\n      marginTop: 27\n    }\n  }, React.createElement(FloatingLabel, {\n    value: name,\n    style: {\n      backgroundColor: color.transparent,\n      marginTop: 40,\n      borderColor: \"#c4c4c4\",\n      borderRadius: 5\n    },\n    label: \"User Name\",\n    labelColor: color.black,\n    autoCapitalize: \"none\",\n    inputStyle: {\n      color: 'rgba(0, 0, 0, 0.6)',\n      fontSize: 12\n    },\n    onChangeText: function onChangeText(value) {\n      setName(value);\n    }\n  }), React.createElement(FloatingLabel, {\n    value: phone,\n    style: {\n      backgroundColor: color.transparent,\n      marginTop: 40,\n      borderColor: \"#c4c4c4\",\n      borderRadius: 5,\n      color: 'rgba(0, 0, 0, 0.6)'\n    },\n    label: \"Phone Number\",\n    autoCapitalize: \"none\",\n    inputStyle: {\n      color: 'rgba(0, 0, 0, 0.6)',\n      fontSize: 12\n    },\n    labelColor: color.black,\n    onChangeText: function onChangeText(value) {\n      setPhone(value);\n    }\n  }), React.createElement(FloatingLabel, {\n    value: email,\n    style: {\n      backgroundColor: color.transparent,\n      marginTop: 40,\n      borderColor: \"#c4c4c4\",\n      borderRadius: 5,\n      color: 'rgba(0, 0, 0, 0.6)'\n    },\n    label: \"Email Address\",\n    labelColor: color.black,\n    inputStyle: {\n      color: 'rgba(0, 0, 0, 0.6)',\n      fontSize: 12\n    },\n    autoCapitalize: \"none\",\n    onChangeText: function onChangeText(value) {\n      setEmail(value);\n    }\n  })), React.createElement(View, {\n    style: {\n      position: 'absolute',\n      bottom: 15,\n      left: '5%',\n      right: '5%',\n      height: 60\n    }\n  }, React.createElement(Button, {\n    onPress: function onPress() {\n      return update();\n    },\n    titleStyle: _objectSpread({\n      color: color.white,\n      fontSize: 16\n    }, GlobalStyles.dm_sans_bold),\n    title: \"Save\",\n    style: {\n      backgroundColor: color.primary,\n      width: \"100%\",\n      borderRadius: 5\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/omkumar/Desktop/projects/farmers-gate/farmers-gate/src/screens/EditProfile/index.js"],"names":["React","useEffect","useState","color","Header","GlobalStyles","useSelector","Button","AntDesign","FloatingLabel","ImagePicker","common_axios","AsyncStorage","BACKEND_URL","EditProfile","state","reducer","user_data","console","log","name","setName","phone","setPhone","email","setEmail","image","setImage","profile_pic","pick_image","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Photos","allowsEditing","aspect","quality","result","cancelled","uri","update","form_data","FormData","length","append","type","getItem","token","fetch","method","headers","Accept","Authorization","body","then","res","json","catch","e","backgroundColor","light_primary","height","width","alignItems","white","borderRadius","marginTop","justifyContent","position","transparent","borderColor","black","fontSize","value","bottom","left","right","dm_sans_bold","primary"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, Text, SafeAreaView, Image, TouchableOpacity } from 'react-native';\nimport { color } from \"../../utils/color\";\nimport Header from \"../../components/Header\"\nimport { GlobalStyles } from \"../../utils/globalStyles\";\nimport { useSelector } from \"react-redux\";\nimport Button from \"../../components/Button\";\nimport AntDesign from \"@expo/vector-icons/AntDesign\";\nimport FloatingLabel from \"../../components/FloatingLabel\";\nimport * as ImagePicker from 'expo-image-picker';\nimport common_axios from \"../../utils/axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { BACKEND_URL } from \"../../utils/url\";\n\nexport default function EditProfile() {\n\n    const { user_data } = useSelector(state => state.reducer);\n    console.log(user_data)\n\n    const [name, setName] = useState(\"\");\n    const [phone, setPhone] = useState(\"\")\n    const [email, setEmail] = useState(\"\")\n    const [image, setImage] = useState(\"\")\n\n    useEffect(() => {\n        setEmail(user_data.email)\n        setPhone(user_data.phone)\n        setName(user_data.name)\n        setImage(user_data.profile_pic)\n    }, []);\n\n    const pick_image = async () => {\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Photos,\n            allowsEditing: true,\n            aspect: [4, 4],\n            quality: 1,\n        });\n\n        console.log(result);\n\n        if (!result.cancelled) {\n            setImage(result.uri);\n        }\n    }\n\n    const update = async () => {\n        let form_data = new FormData()\n        if (email?.length != 0 && user_data.email != email) {\n            form_data.append(\"email\", email);\n        }\n        if (name?.length != 0 && user_data.name != name) {\n            form_data.append(\"name\", name);\n        }\n        if (phone?.length != 0 && user_data.phone != phone) {\n            form_data.append(\"phone\", phone);\n        }\n        if (image?.length != 0 && user_data.profile_pic != image) {\n            form_data.append(\"profile_pic\", {\n                type: \"image/png\",\n                name: `${user_data.name}.png`,\n                uri: image\n            });\n        }\n\n        // const { data } = await common_axios.post('/auth/update_profile', form_data);\n        // console.log(data, 'data');\n        const token = await AsyncStorage.getItem('access_token')\n        fetch(`${BACKEND_URL}/auth/update_profile`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"multipart/form-data\",\n                Accept: \"application/json\",\n                Authorization: `Bearer ${token}`,\n            },\n            body: form_data\n        }).then((res) => res.json())\n            .then((json) => {\n                console.log(json)\n            }).catch((e) => {\n                console.log(e)\n            })\n\n    }\n\n    return (\n        <SafeAreaView style={{ backgroundColor: color.light_primary }}>\n            <View style={{ height: '100%', width: \"100%\", alignItems: 'center', backgroundColor: color.white }}>\n                <Header type=\"custom\" rightBtnVisible={false} right_text={\"Edit\"} onRightBtnPress={() => console.log(\"Hii\")} title={\"Edit Profile\"} />\n                <View style={{ height: 70, width: 70, borderRadius: 35, marginTop: 60 }}>\n                    <Image source={{ uri: image ? image : 'https://picsum.photos/200' }} style={{ height: 70, width: 70, borderRadius: 35 }} />\n                    <TouchableOpacity onPress={pick_image} style={{ backgroundColor: \"rgba(0, 0, 0, 0.5)\", width: '100%', height: '100%', justifyContent: 'center', alignItems: 'center', borderRadius: 100, position: 'absolute' }}>\n                        <AntDesign color={color.white} size={20} name={\"camerao\"} />\n                    </TouchableOpacity>\n                </View>\n                <View style={{ width: \"90%\", marginTop: 27 }}>\n                    <FloatingLabel\n                        value={name}\n                        style={{ backgroundColor: color.transparent, marginTop: 40, borderColor: \"#c4c4c4\", borderRadius: 5, }}\n                        label={\"User Name\"}\n                        labelColor={color.black}\n                        autoCapitalize=\"none\"\n                        inputStyle={{ color: 'rgba(0, 0, 0, 0.6)', fontSize: 12 }}\n                        onChangeText={(value) => {\n                            setName(value);\n                        }}\n                    />\n                    <FloatingLabel\n                        value={phone}\n                        style={{ backgroundColor: color.transparent, marginTop: 40, borderColor: \"#c4c4c4\", borderRadius: 5, color: 'rgba(0, 0, 0, 0.6)' }}\n                        label={\"Phone Number\"}\n                        autoCapitalize=\"none\"\n                        inputStyle={{ color: 'rgba(0, 0, 0, 0.6)', fontSize: 12 }}\n                        labelColor={color.black}\n                        onChangeText={(value) => {\n                            setPhone(value);\n                        }}\n                    />\n                    <FloatingLabel\n                        value={email}\n                        style={{ backgroundColor: color.transparent, marginTop: 40, borderColor: \"#c4c4c4\", borderRadius: 5, color: 'rgba(0, 0, 0, 0.6)' }}\n                        label={\"Email Address\"}\n                        labelColor={color.black}\n                        inputStyle={{ color: 'rgba(0, 0, 0, 0.6)', fontSize: 12 }}\n                        autoCapitalize=\"none\"\n                        onChangeText={(value) => {\n                            setEmail(value);\n                        }}\n                    />\n                </View>\n                <View style={{ position: 'absolute', bottom: 15, left: '5%', right: '5%', height: 60 }}>\n                    <Button onPress={() => update()} titleStyle={{ color: color.white, fontSize: 16, ...GlobalStyles.dm_sans_bold }} title=\"Save\" style={{ backgroundColor: color.primary, width: \"100%\", borderRadius: 5 }} />\n                </View>\n            </View>\n        </SafeAreaView>\n    )\n}"]},"metadata":{},"sourceType":"module"}