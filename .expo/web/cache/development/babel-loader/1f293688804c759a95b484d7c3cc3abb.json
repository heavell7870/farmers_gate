{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport common_axios from \"../../utils/axios\";\nimport { IS_USER, SET_COMMODITIES, USER_DATA } from \"./types\";\nimport * as Location from \"expo-location\";\nexport var setIsUser = function setIsUser(val) {\n  return {\n    type: IS_USER,\n    data: val\n  };\n};\nexport var setUserData = function setUserData(val) {\n  return {\n    type: USER_DATA,\n    data: val\n  };\n};\nexport var setCommodities = function setCommodities(val) {\n  return {\n    type: SET_COMMODITIES,\n    data: val\n  };\n};\nexport var getCommodities = function getCommodities() {\n  return function _callee(dispatch) {\n    var _await$common_axios$g, data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(common_axios.get('/commodity'));\n\n          case 3:\n            _await$common_axios$g = _context.sent;\n            data = _await$common_axios$g.data;\n\n            if (data.data) {\n              console.log(data);\n              dispatch({\n                type: SET_COMMODITIES,\n                data: data.data\n              });\n            }\n\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n};\nexport var getLocation = function getLocation() {\n  return function _callee2(dispatch) {\n    var _await$Location$reque, permission, status, getCurrentPosition, location;\n\n    return _regeneratorRuntime.async(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(Location.requestForegroundPermissionsAsync());\n\n          case 2:\n            _await$Location$reque = _context3.sent;\n            permission = _await$Location$reque.status;\n\n            if (!(permission !== \"granted\")) {\n              _context3.next = 7;\n              break;\n            }\n\n            dispatch(setLocationDenied(true));\n            return _context3.abrupt(\"return\");\n\n          case 7:\n            _context3.next = 9;\n            return _regeneratorRuntime.awrap(Location.enableNetworkProviderAsync().then().catch(function (_) {\n              return null;\n            }));\n\n          case 9:\n            _context3.next = 11;\n            return _regeneratorRuntime.awrap(Location.hasServicesEnabledAsync());\n\n          case 11:\n            status = _context3.sent;\n\n            if (!status) {\n              _context3.next = 26;\n              break;\n            }\n\n            getCurrentPosition = function getCurrentPosition() {\n              return _regeneratorRuntime.async(function getCurrentPosition$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.next = 2;\n                      return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync().then(function (loc) {\n                        return loc;\n                      }).catch(function (_) {\n                        return null;\n                      }));\n\n                    case 2:\n                      return _context2.abrupt(\"return\", _context2.sent);\n\n                    case 3:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            };\n\n            _context3.next = 16;\n            return _regeneratorRuntime.awrap(getCurrentPosition());\n\n          case 16:\n            location = _context3.sent;\n\n          case 17:\n            if (!(location === null)) {\n              _context3.next = 23;\n              break;\n            }\n\n            _context3.next = 20;\n            return _regeneratorRuntime.awrap(getCurrentPosition());\n\n          case 20:\n            location = _context3.sent;\n            _context3.next = 17;\n            break;\n\n          case 23:\n            return _context3.abrupt(\"return\", location);\n\n          case 26:\n            throw new Error(\"Please activate the location\");\n\n          case 27:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};","map":{"version":3,"sources":["/Users/omkumar/Desktop/projects/farmers-gate/farmers-gate/src/redux/actions/main.js"],"names":["common_axios","IS_USER","SET_COMMODITIES","USER_DATA","Location","setIsUser","val","type","data","setUserData","setCommodities","getCommodities","dispatch","get","console","log","getLocation","requestForegroundPermissionsAsync","permission","status","setLocationDenied","enableNetworkProviderAsync","then","catch","_","hasServicesEnabledAsync","getCurrentPosition","getCurrentPositionAsync","loc","location","Error"],"mappings":";AAAA,OAAOA,YAAP;AACA,SACEC,OADF,EACWC,eADX,EAC4BC,SAD5B;AAGA,OAAO,KAAKC,QAAZ,MAA0B,eAA1B;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD;AAAA,SAAU;AACjCC,IAAAA,IAAI,EAAEN,OAD2B;AAEjCO,IAAAA,IAAI,EAAEF;AAF2B,GAAV;AAAA,CAAlB;AAKP,OAAO,IAAMG,WAAW,GAAG,SAAdA,WAAc,CAACH,GAAD;AAAA,SAAU;AACnCC,IAAAA,IAAI,EAAEJ,SAD6B;AAEnCK,IAAAA,IAAI,EAAEF;AAF6B,GAAV;AAAA,CAApB;AAKP,OAAO,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,CAACJ,GAAD;AAAA,SAAU;AACtCC,IAAAA,IAAI,EAAEL,eADgC;AAEtCM,IAAAA,IAAI,EAAEF;AAFgC,GAAV;AAAA,CAAvB;AAKP,OAAO,IAAMK,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SAAM,iBAAOC,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAETZ,YAAY,CAACa,GAAb,CAAiB,YAAjB,CAFS;;AAAA;AAAA;AAExBL,YAAAA,IAFwB,yBAExBA,IAFwB;;AAGhC,gBAAIA,IAAI,CAACA,IAAT,EAAe;AACbM,cAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AACAI,cAAAA,QAAQ,CAAC;AAAEL,gBAAAA,IAAI,EAAEL,eAAR;AAAyBM,gBAAAA,IAAI,EAAEA,IAAI,CAACA;AAApC,eAAD,CAAR;AACD;;AAN+B;AAAA;;AAAA;AAAA;AAAA;AAQhCM,YAAAA,OAAO,CAACC,GAAR;;AARgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAN;AAAA,CAAvB;AAYP,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAM,kBAAOJ,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEvBR,QAAQ,CAACa,iCAAT,EAFuB;;AAAA;AAAA;AACjBC,YAAAA,UADiB,yBACzBC,MADyB;;AAAA,kBAG3BD,UAAU,KAAK,SAHY;AAAA;AAAA;AAAA;;AAI7BN,YAAAA,QAAQ,CAACQ,iBAAiB,CAAC,IAAD,CAAlB,CAAR;AAJ6B;;AAAA;AAAA;AAAA,6CAOzBhB,QAAQ,CAACiB,0BAAT,GACHC,IADG,GAEHC,KAFG,CAEG,UAACC,CAAD;AAAA,qBAAO,IAAP;AAAA,aAFH,CAPyB;;AAAA;AAAA;AAAA,6CAUVpB,QAAQ,CAACqB,uBAAT,EAVU;;AAAA;AAUzBN,YAAAA,MAVyB;;AAAA,iBAW3BA,MAX2B;AAAA;AAAA;AAAA;;AAYvBO,YAAAA,kBAZuB,GAYF,SAArBA,kBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDACnBtB,QAAQ,CAACuB,uBAAT,GACHL,IADG,CACE,UAACM,GAAD;AAAA,+BAASA,GAAT;AAAA,uBADF,EAEHL,KAFG,CAEG,UAACC,CAAD;AAAA,+BAAO,IAAP;AAAA,uBAFH,CADmB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAZE;;AAAA;AAAA,6CAgBRE,kBAAkB,EAhBV;;AAAA;AAgBzBG,YAAAA,QAhByB;;AAAA;AAAA,kBAiBtBA,QAAQ,KAAK,IAjBS;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAkBVH,kBAAkB,EAlBR;;AAAA;AAkB3BG,YAAAA,QAlB2B;AAAA;AAAA;;AAAA;AAAA,8CAoBtBA,QApBsB;;AAAA;AAAA,kBAsBvB,IAAIC,KAAJ,CAAU,8BAAV,CAtBuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAN;AAAA,CAApB","sourcesContent":["import common_axios from \"../../utils/axios\";\nimport {\n  IS_USER, SET_COMMODITIES, USER_DATA,\n} from \"./types\";\nimport * as Location from \"expo-location\";\n\nexport const setIsUser = (val) => ({\n  type: IS_USER,\n  data: val,\n});\n\nexport const setUserData = (val) => ({\n  type: USER_DATA,\n  data: val,\n});\n\nexport const setCommodities = (val) => ({\n  type: SET_COMMODITIES,\n  data: val,\n});\n\nexport const getCommodities = () => async (dispatch) => {\n  try {\n    const { data } = await common_axios.get('/commodity')\n    if (data.data) {\n      console.log(data)\n      dispatch({ type: SET_COMMODITIES, data: data.data })\n    }\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nexport const getLocation = () => async (dispatch) => {\n  let { status: permission } =\n    await Location.requestForegroundPermissionsAsync();\n  if (permission !== \"granted\") {\n    dispatch(setLocationDenied(true));\n    return;\n  }\n  await Location.enableNetworkProviderAsync()\n    .then()\n    .catch((_) => null);\n  const status = await Location.hasServicesEnabledAsync();\n  if (status) {\n    const getCurrentPosition = async () =>\n      await Location.getCurrentPositionAsync()\n        .then((loc) => loc)\n        .catch((_) => null);\n    let location = await getCurrentPosition();\n    while (location === null) {\n      location = await getCurrentPosition();\n    }\n    return location;\n  } else {\n    throw new Error(\"Please activate the location\");\n  }\n};"]},"metadata":{},"sourceType":"module"}